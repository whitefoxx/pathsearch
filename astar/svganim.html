<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>svg animation</title>
    <script defer>
        let animSvg;
        let startAnim = false;
        let interval;
        document.addEventListener("keydown", (event) => {
            const key = event.key;
            console.log(key);
            if (!animSvg) {
                animSvg = document.getElementById("anim");
                animSvg.addEventListener("onend", () => {
                    console.log("animation done");
                })
            }
            if (key === " ") {
                if (!startAnim) {
                    startAnim = true;
                    let x = parseFloat(animSvg.getAttribute("x"));
                    interval = setInterval(() => {
                        x += 1;
                        animSvg.setAttribute("x", x);
                    }, 20);
                } else {
                    clearInterval(interval);
                    startAnim = false;
                    animSvg.setAttribute("x", 0);
                }
            }
        });

    </script>
  </head>
<body>

    <div>
        <svg width="100%" height="100%">
            <svg id="anim" width="200" height="200" x="0" y="0" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path
                fill="none"
                stroke="lightgrey"
                d="M20,50 C20,-50 180,150 180,50 C180-50 20,150 20,50 z" />
            
                <circle r="5" fill="red">
                <animateMotion
                    dur="3s"
                    repeatCount="indefinite"
                    path="M20,50 C20,-50 180,150 180,50 C180-50 20,150 20,50 z" />
                </circle>
            </svg>
        </svg>
    </div>
  </body>

  </head>